# Glossary — DocOrchestrator

Краткий словарь терминов, используемых в проекте DocOrchestrator: от пайплайна обработки документов до настроек локального инференса (LM Studio / GGUF). [memory:25]

## Термины проекта

**DocOrchestrator** — config-first оркестратор обработки документов: вход (PDF/сканы) → артефакты → тип документа → извлечение полей → валидация/верификация → отчёты. [memory:25]

**Пайплайн (pipeline)** — последовательность стадий обработки (атомов), которые выполняются по маршруту и могут включаться/выключаться конфигом. [memory:27]

**Атом / стадия (stage)** — изолированный шаг пайплайна (например, rasterize/classify/extract/evaluate) с чётким контрактом по входным/выходным артефактам. [memory:27]

**Короткий маршрут** — упрощённый режим разработки: растрирование → извлечение → добавление docTypes (без сегментации/split и без сложной предобработки). [memory:42]

**root.json** — корневой конфиг, управляющий маршрутом, путями, включением стадий, моделями и профилями запуска. [memory:32]

**docTypes/*.json** — конфиги типов документов (паспорт, ЕГРЮЛ и т.д.): признаки, список полей, схемы, параметры извлечения и валидации. [memory:30]

**staging/** — рабочая зона, где хранятся артефакты обработки (растры страниц, кропы, промежуточные JSON) для переиспользования при перезапусках. [memory:27]

**Артефакт (artifact)** — файл/JSON, который является результатом стадии и используется следующими стадиями (например, `pages/r150/*.webp`, `document.json`). [memory:27]

**manifest.json** — «паспорт» обработки: что сделано, какими версиями конфигов/моделей, где лежат артефакты, плюс метрики (время, точность, ошибки). [memory:24]

**Профилирование (timing/profiling)** — замер времени на всех стадиях (включая растрирование), чтобы находить узкие места и сравнивать режимы обработки. [memory:24]

## Документы и изображения

**Растрирование (rasterize)** — преобразование PDF-страниц (вектор/текст/скан) в изображения фиксированного разрешения для подачи в VLM и дальнейшей обработки. [memory:25]

**DPI (dots per inch)** — «разрешение рендера» при растрировании PDF; влияет на размер изображения и читаемость мелкого текста. [memory:23]

**Пирамида DPI** — сохранение нескольких разрешений одной и той же страницы (например 100/150/200/250/300 DPI) ради ускорения и A/B-тестов точности. [memory:23]

**WebP (lossless)** — формат изображений, который удобно хранить как артефакт: компактнее PNG при сохранении качества. [memory:25]

**bbox (bounding box)** — прямоугольник (обычно `[x1, y1, x2, y2]`) в координатах изображения, задающий область документа/поля/фрагмента для нарезки (crop). [memory:25]

**Splitter / Segmenter** — стадия обнаружения нескольких документов на одном листе и нарезки на отдельные изображения по bbox. [memory:25]

**Предобработка (preprocess/enhance)** — улучшение изображения перед извлечением (deskew, контраст, шумоподавление, и т.п.), выполняемое на CPU как дешёвый способ поднять точность. [memory:28][conversation_history:36]

## Модели и извлечение

**VLM (Vision-Language Model)** — модель, принимающая изображение и текстовую инструкцию (промпт) и выдающая ответ (в идеале — структурированный JSON). [memory:25]

**Router (быстрая модель, например 2B)** — стадия быстрого определения типа документа и первичной оценки (например, «комбо-скан» или нет). [memory:24]

**Extractor (старшая модель, например SAGE/8B)** — стадия извлечения целевых полей в JSON по типу документа. [memory:25]

**Промпт (prompt)** — текстовая инструкция модели, которая фиксирует формат ответа (JSON-only), список полей и правила извлечения. [memory:32]

**JSON-only** — требование к модели возвращать только JSON без пояснений, чтобы результат был детерминированно парсабельным. [memory:24]

**Retry prompt** — повторный запрос к модели при провале валидации: короткая инструкция «исправь только эти поля/ошибки, JSON-only». [conversation_history:35]

## Качество и метрики

**Валидация (validation)** — проверка формата/типа/обязательности полей (часто через JSON Schema и регулярки). [memory:28]

**Нормализация (normalization)** — приведение значений к каноническому виду (даты, пробелы, регистр, типографика, единый формат). [memory:28]

**Верификация (verification)** — доменные проверки и согласованность (контрольные суммы, диапазоны, взаимосвязи полей). [memory:28]

**Ground Truth / референс** — эталонный JSON для документа/страницы, с которым сравниваются результаты модели. [memory:47]

**Evaluator** — стадия сравнения результата модели с ground truth и подсчёта метрик качества. [memory:47]

**Exact Match (EM)** — метрика «строгое совпадение» значения поля с эталоном (полезна для ИНН/ОГРН/номеров). [memory:47]

**Расстояние Левенштейна** — метрика близости строк (полезна для ФИО/адресов, где возможны небольшие опечатки). [memory:47]

## Локальный инференс и GGUF (LM Studio / llama.cpp)

**LM Studio** — локальный раннер моделей с OpenAI-compatible API (удобен для интеграции в оркестратор). [memory:48]

**GGUF** — формат файлов моделей, используемый экосистемой llama.cpp и многими локальными раннерами. [web:61]

**Квантование (quantization)** — сжатие весов модели (например, 16-bit → 4-bit) ради экономии RAM/VRAM ценой некоторой потери качества. [web:61]

**Q4_K_M / Q4_K_S / Q6_K / Q8_0** — семейства K-quants: варианты 4/6/8-битного хранения весов (обычно компромисс «память ↔ качество»). [web:64][web:61]

**IQ* (например IQ4_XS)** — “I-quants/importance-aware” кванты, часто дающие лучшее качество при близком размере по сравнению с K-quants аналогичного «класса». [web:64]

**F16** — хранение весов в 16-bit (как правило, максимум качества и максимум требований к памяти). [web:61]

**KV cache (K/V кэш)** — память для key/value-тензоров внимания, ускоряющая генерацию и влияющая на потребление VRAM при длинном контексте. [web:65]

**Offload KV cache to GPU** — перенос KV-кэша на VRAM, что может ускорять инференс (если помещается) и менять баланс “CPU↔GPU”. [web:65]

**Flash Attention** — оптимизация механизма внимания, уменьшающая накладные расходы на память и ускоряющая вычисления на GPU. [web:74]

**RoPE (Rotary Positional Embeddings)** — позиционные эмбеддинги; параметры `rope_freq_base` / `rope_freq_scale` используются для настройки/растяжения контекста в некоторых раннерах. [web:69][web:66]

**Контекст (context length)** — максимальное число токенов в одном запросе/диалоге модели (включая системные инструкции, промпт и историю). [web:66]

**Batch size (пакет оценки)** — настройка, влияющая на скорость/память при инференсе (в UI раннера может называться “размер пакета оценки”). [memory:24]
